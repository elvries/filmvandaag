/*
** Manually go to https://www.filmvandaag.nl/zoek?q=
** Use https://wtools.io/convert-list-to-json-array to convert text items to json array.
*/

const edv_wishlist = ["Die Ene","Memory ","Mrs. Harris goes to Paris","Poor Things","What happens later","Elemental","Oppenheimer ","Rush","Oklahoma!","Haunted Mansion","The Boogeyman","In the heights ","Spider-Man: Across the Spider-Verse","The Imitation Game","Anatomy of a fall ","Prospect ","Dungeons and dragons: honour among thieves","Occupied city","Near Dark","The Mother ","X en Scream films","Triangle of sadness ","John Wick Chapter 4","Speak no evil","No hard feelings","Aftersun","Missing","All quiet on the western front","Infinity chamber ","Prospect ","To Leslie ","A man called Otto ","Een man die Ove heet ","Operation Fortune: Ruse de Guerre","Abott Elementary","Beau is afraid ","Knock at the cabin","The Killer","Asteroid City ","Sharper","Argylle","Scream 6","Resurrection","Bones and All","A Wounded Fawn","We’re All Going to the World’s Fair","Crimes of the future ","Nope","Hellbender ","Terrifier 2","Living","Zillion","Everything everywhere at once","The worst person in the world","Im Westen nicht neues","Flee","Close","CODA","Triangle of sadness","The Banshees of inisherin","Babylon ","Tar","The Son","Triangle of sadness","The Offering ","Call me by your name","Devotion","The Whale","Amsterdam","Halloween Ends","Bon Bini Holland 3","Smile ","The Black phone","Where the crawdads sing","See how they run","Do not hesitate","Euphoria ","Orphan: First Kill","De Vuurlinie ","The Wrestler","Whiplash","You were never really here","Contratiempo","Incendies","The Unforgivable","The Father","Matchstick Men","The Last Duel","The Usual Suspects","My Name Is Nobody","Trinity Is Still My Name","They Call Me Trinity","The Good, The Bad, and the Ugly","Once Upon A Time In The West","Falling Down ","Nope","The Black Phone","Speak no Evil","Men","Memory","Turning Red","Triangle of sadness","?Crimes of the future","Operation Mincemeat","Everything Everywhere All at Once","Last Seen Alive","The Lobster","Dont worry darling","Moloch","Costa!","The Witch","The Lighthouse","Morbius","C'mon C'mon","Met Mes","X","Ambulance","The Northman","The Pursuit of Happiness","Uncharted","Nightmare Alley","Power of the dog","The King's man","Scream","Jackass Forever","Nightmare Alley","Austin Powers","Audition","Last night in soho","Train to Busan","Till Death","Mijn vader is een vliegtuig","The Courier","Copshop","De Veroordeling","Stillwater","A single life","Kop op","Soul","Nomadland","Old","Titane","Pulp Fiction","De beentjes van sint-hildegard","SPIRAL: FROM THE LEGACY OF SAW","BON BINI: JUDESKA IN DA HOUSE","Nobody","Die Hard","The Living Sea","Earthflight","Life","Frozen Planet","The Hunt","Rocky","Rambo","Journey","Infestation","The Godfather","New Kids","King Solomons Mines","Ghostbusters","Poseidon","X-Men","Wolverine","Iron Man","Around the world in 80 days","The Thing","Clue","Big Ass Spider!","Percy Jackson Sea of Monsters","Independence Day","Greenland","The Letter Room","Druk","Beanpole","Willy's Wonderland","Matterhorn","Palm Springs","Hamilton","Music","Sixth Sense","The Sign","Unbreakable","De Kuthoer","Fear of the rain","Borat Subsequent Moviefilm","Prooi","De Dirigent","De Beentjes van Sint-Hildegaard","Babyteeth","Freaky","Happy death day","Strange Days","Sherlock Holmes 2","Unhinged","Peninsula","?Jerk","Color out of space","Resident Evil The Final Chapter","Resident Evil Retribution","Resident Evil After Life","The eternal sunshine of the spotless mind","Predestination","Timecrimes","Primer","Battle Royale","Triangle","Official Secrets","Candyman","The Kid Who Would Be King","Le Mans '66","Once the Dust Settles","Beanpole","The Grudge","Goodnight Mommy","The Lodge","Starship Troopers","Paths of Glory","Following","Love: The Movie","The New Mutants","Underwater","All is lost","?Twelve Angry Men","Haunt","Dr. Horrible's Sing-Along Blog","Harold & Kumar","Stand by me","The longest day","Ad Astra","The biggest little farm","Break","The Dead Don't Die","The Wolf's Call","Annabelle Comes Home","Child's Play","Stuber","Iron Sky: The Coming Race","Longshot","Three identical strangers","Huisdiergeheimen 2","Ma","Greta","Mary Poppins Returns","Second Act","Nos Batailles","The Beach Bum","Us","High life","Destroyer","Green Book","Kubo and the two strings","The hate u give","Vice","The house that Jack built","Mijn bijzonder rare week met Tess","Alles stroomt","Welcome to Marwen","Three thousand miles to Graceland","Naked Gun","Suspiria","Grans","Mile 22","The Sisters Brothers","Asterix het geheim van de toverdrank","First Man","Shoplifters","The Old Man & The Gun","Suspiria","Mortal Engines","Widows","The nutcracker and the four realms","Unsane","Brigsby Bear","Under the Silver Lake","Slenderman","Stalker","Searching","Crazy Rich Asians","Last resort","Meet Jimmy","The Nun","Under the silver lake","RedBad","Truth or Dare","Unsane","God's own country","Tremors 5","De WODC affaire","De ondergang","The Party","Turist","The Square","Three billboards outside ebbing Missouri","Mother!","safety not guaranteed","the emoji film","Save the tiger","Neighbors","Joe","lean on me","Chinese Connection","Into the Furnace","Beauty and the Beast","Moonlight","Personal Shopper","Dead Man","Down by Law","Life of Pi","Spotlight","Ma Vie de Courgette","The Windmill Massacre","Kristen","Elle","Neon Demon","Term Life","The Founder","Deep Web","The Mechanic","Crank","Indiegame: The Movie","Ben-Hur","War Dogs","Independence Day: Resurgence","Eye in the Sky","Demolition","Kiss Kiss Bang Bang","Midnight Special","The finest hours","Where to invade next","Inception: The Cobol Job","Tinker Tailor Soldier Spy","World of tomorrow","Carol","The Green Inferno","Sisters","Bridge of Spies","Creed","The Tenant","Slow West","Braindead","Dance of the dead","Crimson Peak","The Green Inferno","No Escape","Paranormal Activity The Ghost Dimension","The Lobster","Everest","Southpaw","While we're young","Irrational Man","Slow West","The Omega Man","Stardust memories","Paper Towns","Hitman: agent 47","Five Nights at Freddy's","Dead Rising Watch Tower","The Imitation Game","Ex Machina","Unfriended","Slow West","The Boy Next Door","The Water Diviner","Lisa the fox faerie","It Follows","Turbo kid","Wild","Boy 7","Seventh Son","Primer","Frank","The Raid 2","The Babadook","A girl walks home alone at night","Starry eyes","Late phases","Whiplash","Under the skin","Dear White People","Boyhood","Blackhat","What we do in the shadows","Nightcrawler","Exodus: Gods & Kings","PS I Love You","Wild Tales","Lie of Crime","As Above/So Below","The Drop","Jessabelle","Revenge of the Green Dragon","Horns","Stonehearst Asylum","Locke","St Vincent","Nausicaa","The Damned","The Homesman","As Above So Below","Chef","Sin City A Dame To Kill For","A most wanted man","Coherence","Let's be Cops","Wrong Turn 2: Dead End","Blackmail","Borgman","The fault in our stars","The Grand Budapest Hotel","Videodrome","The Two Faces of January","Night Moves","13 Sins","Devils Knot","Blue Ruin","Incendies","De 100-jarige man die uit het raam klom en verdween","Oculus","Reasonable Doubt","That Awkward Moment","Doorbijten","Rood","Lijkzang","The Frighteners","The Keeper of Lost Causes","Snowpiercer","Het Vonnis","Dossier K.","3 days to kill","Open Grave","Lone Survivor","Its the end of the world (met Seth Rogen)","Nebraska","Her","Saving Mr. Banks","The Butler","Out of the furnace","Frankenstein","The Weekend","I, Frankenstein","Devils due","American Hustle","Primer","Paranormal Activity The Marked Ones","Enough Said","Resolution","The Battery","Batman the dark knight returns animation","The Secret Life of Walter Mitty","Kapringen","13 days","bros before ho's","battlestar galactica","The secret in their eyes","Me and you and everone we know","Rushmore","Man on Wire","Nine lives","The Way Way Back","The Counselor","Vijf mannen","Prince Avalanche","Don Jon","Wolf","Twelve Years A Slave","O Brother Where Art Thou","Say Anything","The Cooler","Boogie Nights","This is the End","Jobs","Solaris","Headhunters","Race to Witch Mountain","frances ha","The Sapphires","Byzantium","Hangover 3","21 grams","The company you keep","The haunting in Georgia","All is lost","Flight of the Butterflies","The Grand Master","The Big Wedding","Scary Movie 4","Scary Movie 5","Warm Bodies","A late quartet","Stoker","Valentino","Drag me to hell","Oz the great and powerful","Broken","Promises Land","I give it a year","Texas Chainsaw 3D","Hansel and Gretel Witch Hunters","The Following","jagten","Amour","Beasts of the Southern Wild","The Awakening","Deadfall","Seven Psychopaths","Lawless","Quest for fire","Alex Cross","Running on empty","Ruby Sparks","Hope Springs","Love is all you need","De regels van Mathijs","Dans la Maison","The Domino Effect","Robot & Frank","Alles is familie","Red Lights","For the end of the world seeking a friend","Ruby starr","The Angels Share","Crazy Heart","A Few Best Men","Abraham Lincoln Vampire Hunter","The Raid","Rock of Ages","King of Kong","Somewhere tonight","Moonrise Kingdom","Act of valor","Seeking Justice","The Raven","The Division","Killer Joe","Cronos","The Devils Reject","Silent House","As it is in Heaven","Take Shelter","Princess Mononoke","Grave of the Fireflies","My Neighbour Totoro","Laputa: Castle in the Sky","Spirited Away","Akira","Ghost in the Shell","The Last Samurai","Haywire","The Artist","Plan C","Quiz","A Boys Life","Tyrannosaur","The Descendants","Black Out","Tresspass","Margin Call","The Monsters of Nix","Sugarland Express","Beginners","The Rum Diary","In Time","I don't know how she does it","What's your Number","The Trip","Submarine","De Bende van Oss","The Good, the Bad and the Weird","Midnight in Paris","Your Highness","Essential Killing","Attack the Block","Claustrofobia","The Truth","Thirteen","Hondskop","Out of Sight","Bodyguards and Assassins","Pontypool","Mary and Max","Alle Tijd","Drones","Fase 7","Hell Driver","Rubber","The Troll Hunter","Super","Bitter Feast","Chop","Monsters","Hobo with a shotgun","Rare Exports","Hereafter","Never Let Me Go","Red Faction Origins","The Mechanic","Nick of time","Animal Kingdom","The Kings Speech","Pizzamaffia","Biutiful","Gnomeo & Juliet","Next Door","Tamara Drewe","Morning Glory","Black Swan","Love & Other Drugs","Gullivers Travels","Primal Fear","Alice in Wonderland","The Book of Eli","Collector","The Kids Are Allright","Catfish","Soul Kitchen","Wall Street: Money Never Sleeps","Hereafter","Jacobs Ladder","Vanilla Sky","A Scanner Darkly","The American","Going the Distance","Four Lions","A Somewhat Gentle Man","You Don't Know Jack","Machete","Predators","Sterke Verhalen","Crime d'Amour","The Last Samurai","Exam","Team America","Dinner for the Schmucks","Ondine","De Gelukkige Huisvrouw","Triangle","Leap Year","Lebanon","The Beast of War","The Man from Earth","She's out of my league","Edge of darkness","Shrek 4 forever after","The host, joon-ho bongs","Kom niet aan mijn kinderen","Les barons","1.4 Wonder Woman","1.5 Green Lantern: First Flight","1.6 Superman/Batman: Public Enemies","Justice League: Crisis on Two Earths","Centurion","Fantastic Mr. Fox","Precious","A Single Man","Un Prophete","The Imaginarium of Doctor Parnassus","Solomon Kane","From Paris with Love","An Education","Antichrist","Das Weisse Band","Triangle","A boyfriend for christmas","Where the Wild Things are","Komt een vrouw bij de dokter","Capitalism: a love story","Moon","Yip Man","Antikorper","The Machinist","Revanche","500 days of summer","Y tu mama tambien","Drag me to Hell","Towelhead","De Laatste Dagen van Emma Blank","Departures","Fighting","The Last House on the Left","Rocky Balboa","Night at the Museum 2","Tropa de Elite","The Boat that Rocked","Stranded","Donkey Punch","Rachel Getting Married","Slumdog Millionaire","Transsiberian","Wallace & Gromit in 'A Matter of Loaf and Death'","Oorlogswinter","Milk","Pride and Glory","Anywhere but home","Poultrygeist: Night of the Chicken Dead","Blood Simple","The Hunting Party","Waz","Burn after Reading","Sex Drive","Babylon A.D.","Bug","Midnight Meat Train","Scar 3D","Hoe overleef ik mezelf","Happy-Go-Lucky","Paris","Another Earth","Leatherheads","Before The Devil Knows You're Dead","El Orfanato","A Simple Plan","Dunya en Desie","Dan in Real Life","Street Kings","Rose Red","Desperation","Reservation Road","Sextet","Into the Wild","In the Valley of Elah","TBS","Bond 22","Funny Games","Sweeney Todd","Charlie Wilsons war","Alibi","The Kite Runner","Michael Clayton","Run Fatboy Run","Atonement","The Brave One","Anche Libero Va Bene","Mr. Brooks","Wolfsbergen","Hairspray","The Simpons Movie","Wolf creek","Underworld 2","Raak","Dennis P.","Escort","Kicks","Lonely Hearts","The Last King of Scotland","A Prairie Home Companion","Volver","Running with Scissors","Tenacious D: In the Pick of Destiny","The Passion of the Christ","Beetje verliefd","Nachtrit","Sl8n8","Jay and Silent Bob Strike Back","Fragile","American dreamz","D-Babel","The Libertine","Karakter","Breaking the Waves","Secrets & Lies","The Thin Red Line","The Fisher King","Suzhou River","Shower","Audition","Solas","The Indian Runner","Dancer in the Dark","Pane e Tulipani","Requiem for a Dream","Cidade de Deus","Goodfellas","Leon","The Final Countdown"];


function search(movie) {
    console.log(`Searching ${movie}`)
    let searchButton = document.querySelector("#search-sidebar > form > div:nth-child(1) > div.body > label:nth-child(2) > input[type=radio]");
    searchButton.click();
    edv_searchInput = document.querySelector("#search-sidebar > form > div:nth-child(3) > input");
    edv_searchInput.value = movie;
    document.querySelector("#search-sidebar > form > div:nth-child(3) > fieldset > label:nth-child(1) > input[type=radio]").click();
    document.querySelector("#search-sidebar > form > div:nth-child(3) > fieldset > label:nth-child(2) > input[type=radio]").click();
}

function addToWatchList(movie) {
    movies = document.querySelectorAll('#fv-search > div.search.main > div.search-results > ul > li[class="item is-movie"]');

    if (movies.length === 0) {
        console.log('Movie not found');
        return;
    } else if (movies.length > 1) {
        console.log('More than 1 movie found');
        return;
    } else if (!movies[0].innerText.toLowerCase().includes(movie.toLowerCase())) {
        console.log('Result does not contain movie');
        return;
    }
    
    edv_watchlistButton = document.querySelector("#fv-search > div.search.main > div.search-results > ul > li > div.rating > div > div:nth-child(2) > div");
    
    if (edv_watchlistButton.classList.contains('active')) {
        console.log('Movie already in watchlist');
    } else {
        edv_watchlistButton.click();
        console.log('Movie added to watchlist');
    }
}

const timer = ms => new Promise(res => setTimeout(res, ms))

async function load() {
    for (const movie of edv_wishlist) {
        search(movie);
        await timer(2000);
        addToWatchList(movie);
        await timer(5000);
    };
}

// location.href = "https://www.filmvandaag.nl/zoek?q="; // go to search page with filters
load();
